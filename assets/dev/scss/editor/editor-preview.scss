//
// Editor
//
@import "../helpers/variables";
@import "../helpers/mixins";
@import "animations";
@import "compatibility";

// Hidden WP Admin Bar
html.elementor-html {
	margin-top: 0 !important;
}

#elementor {
	position: relative;
}

.elementor-editor-active {

	.elementor-inner {
		margin-top: 23px;
	}

	.elementor.elementor-edit-mode {

		.elementor-element-empty {

			.elementor-sortable-placeholder {
				display: none;
			}
		}

		.elementor-empty-view {
			position: relative;
			height: 100%;
			z-index: $first-layer;
		}

		.elementor-first-add {
			text-align: center;
			border: 1px dashed #d5dadf;
			display: flex;
			height: 100%;
			align-items: center;
			justify-content: center;

			.elementor-icon {
				font-size: 19px;
				color: $editor-light;
				cursor: pointer;
			}
		}

		.elementor-element {

			> .elementor-element-overlay {
				position: absolute;
				top: 0;
				right: 0;
				letter-spacing: 0; // Hack for front-end style themes
				z-index: $element-overlay;
				pointer-events: none;
			}

			&.elementor-widget-empty {
				height: 50px;
				background: $white;

				&:after {
					position: absolute;
					content: '';
					left: 0;
					right: 0;
					top: 0;
					bottom: 0;
					background-color: fade-out($editor-background, .2);
				}

				.elementor-widget-empty-icon {
					position: absolute;
					height: 25px;
					width: 25px;
					top: 0;
					bottom: 0;
					right: 0;
					left: 0;
					margin: auto;
					color: $gray;
					font-size: 22px;
				}
			}

			&:not(:hover) {

				&:not(.elementor-element-editable) {

					> .elementor-element-overlay {

						.elementor-editor-element-settings {
							display: none;
						}
					}
				}
			}

			&[data-side="top"], &[data-side="bottom"] + .elementor-element {

				&:before {
					content: '';
					background-color: $editor-info;
					transition-timing-function: ease-out;
					opacity: .9;
					height: $widget-placeholder-size;
					animation: placeholder-widget 500ms;
					display: block;
				}
			}

			&[data-side="bottom"]:last-child {

				&:after {
					content: '';
					background-color: $editor-info;
					transition-timing-function: ease-out;
					opacity: .9;
					height: $widget-placeholder-size;
					animation: placeholder-widget 500ms;
					display: block;
				}
			}
		}

		// Section
		.elementor-section {

			> .elementor-element-overlay {
				left: 0;
				bottom: 0;

				&:after {
					position: absolute;
					left: 2px;
					right: 2px;
					top: 2px;
					bottom: 2px;
					outline: 2px solid $editor-info;
					animation: section-outline .75s;
				}
			}

			&:hover,
			&.elementor-element-editable {

				> .elementor-element-overlay {

					&:after {
						content: '';
					}
				}
			}
		}

		.elementor-top-section {

			> .elementor-container {

				> .elementor-row {
					min-height: 80px;
				}
			}
		}

		.elementor-inner-section {

			&:first-child {
				margin-top: 15px;
			}
		}

		// General - Overlay Settings
		.elementor-editor-element-settings {
			position: absolute;
			overflow: hidden;
			display: flex;
			height: 23px;
			list-style: none;
			margin: 0;
			padding: 0;
			font-family: Arial, Helvetica, sans-serif;
			font-size: 13px;
			font-weight: normal;
			font-style: normal;
			line-height: 1;
			z-index: $first-layer;
			pointer-events: all;

			.elementor-editor-element-trigger {

				&.elementor-active {

					~ .elementor-editor-element-setting {
						@include margin-start(0)
					}
				}

				&:not(.elementor-active) {

					~ .elementor-editor-element-setting {
						width: 0;
						font-size: 0;
						padding: 0;
					}
				}
			}

			.elementor-editor-element-remove {

				&:hover {

					.fa {
						color: $editor-danger;
					}
				}
			}
		}

		.elementor-editor-element-setting {
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			padding: 0;
			margin: 0;
			font-size: 10px;
			color: #fff;
			width: 22px;
			transition: margin .3s, width .3s, font .3s;
			box-sizing: content-box;
		}

		.elementor-editor-section-settings {
			top: 0;
			@include start(50%);
			background-image: linear-gradient(to bottom, darken($editor-info, 10%), $editor-info);
			border-radius: 6px 6px 0 0;
			transform: translateX(-50%) translateY(-100%);

			.elementor-editor-element-setting {

				&:hover {
					background-color: darken($editor-info, 20%);
				}

				&:first-child {
					@include padding-start(6px);

					&:not(.elementor-active) {
						@include padding-end(6px);
					}
				}

				&:last-child {
					@include padding-end(6px);
				}
			}
		}

		// Column - Overlay Settings
		.elementor-editor-column-settings {
			top: -1px;
			@include start(-1px);
			border-radius: 0 0 6px 0;
			background-image: linear-gradient(to bottom, $editor-dark, $editor-darker);

			.elementor-editor-element-setting {

				&:hover {
					background-color: $editor-darkest;
				}

				&:first-child {
					@include padding-start(2px);

					&:not(.elementor-active) {
						@include padding-end(2px);
					}
				}

				&:last-child {
					@include padding-end(2px);
				}
			}
		}

		// Widget - Overlay Settings
		.elementor-editor-widget-settings {
			z-index: $second-layer;
			top: -1px;
			@include end(-1px);
			background-image: linear-gradient(to top, darken($editor-info, 10%), $editor-info);
			border-radius: 0 0 0 6px;
			flex-direction: row-reverse;

			.elementor-editor-element-setting {

				&:hover {
					background-color: darken($editor-info, 20%);
				}

				&:first-child {
					@include padding-end(2px);

					&:not(.elementor-active) {
						@include padding-start(2px);
					}
				}

				&:last-child {
					@include padding-start(2px);
				}
			}
		}

		.elementor-editor-element-trigger {

			@media(min-width: $screen-lg-min) {
				cursor: grab;
			}
		}

		.elementor-editor-element-setting {

			&:not(.elementor-editor-element-trigger) {

				@media (max-width: $screen-md-max) {
					display: none;
				}
			}
		}

		// Section Full (No more columns) - Overlay
		.elementor-section-filled {

			.elementor-editor-column-settings {

				.elementor-editor-element-add, .elementor-editor-element-duplicate {
					display: none;
				}
			}

			.elementor-sortable-placeholder {

				&.elementor-column {
					display: none;
				}
			}

			.elementor-row {

				&.elementor-draggable-over {
					border: 1px solid $editor-danger;
				}
			}
		}

		// Column
		.elementor-column {

			> .elementor-element-overlay {
				left: 0;
				bottom: 0;

				&:after {
					position: absolute;
					left: 0;
					right: 0;
					top: 0;
					bottom: 0;
					outline: 1px dashed $editor-dark;
				}
			}

			&:hover,
			&.elementor-element-editable {

				> .elementor-element-overlay {
					border: 1px solid $white;

					&:after {
						content: '';
					}
				}
			}

			&.elementor-dragging-on-child {

				> .elementor-element-overlay {
					border: 1px solid $editor-info;

					&:after {
						display: none;
					}
				}
			}

			> .ui-resizable-e, > .ui-resizable-w {
				cursor: ew-resize;
				width: 7px;
				position: absolute;
				@include end(-5px);
				top: 0;
				height: 100%;
			}

			&:last-of-type {
				> .ui-resizable-e, > .ui-resizable-w {
					display: none !important;
				}
			}

			@media (max-width: $screen-md-max) {
				> .ui-resizable-e, > .ui-resizable-w {
					display: none !important;
				}
			}
		}
	}

	.elementor-column-wrap {

		&.elementor-element-empty {

			.elementor-widget-wrap {

				@media (min-width: $screen-md-min) {
					padding: 10px;
				}
			}
		}
	}

	.elementor-widget {

		&.elementor-loading {
			opacity: .3;
		}

		&:not(.elementor-loading):not(.elementor-widget-menu-anchor) { // Don't apply transition on anchor widget - Safari hack
			transition: all .1s;
		}

		&.elementor-element-editable, &.elementor-widget-can-edit:hover {
			outline: 1px solid $editor-info;
		}

		&:not(:hover) {

			.elementor-editor-element-settings {
				display: none;
			}
		}
	}

	.elementor-column.elementor-dragging {

		div.elementor-column-wrap {
			min-height: 50px; //FOR EMPTY COLUMN - DON'T REMOVE!
		}
	}

	.handle {
		display: none; //TEMP
	}

	.elementor-sortable-helper {
		position: absolute;
		border-radius: 3px;
		background-color: #fff;
		text-align: center;
		color: $editor-darker;
		box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);

		.icon {
			font-size: 28px;
			padding-top: 15px;
			line-height: 1;
		}

		.elementor-element-title-wrapper {
			display: table;
			width: 100%;
		}

		.title {
			font-size: 11px;
			font-family: Arial, Helvetica, sans-serif;
			font-weight: normal;
			font-style: normal;
			display: table-cell;
			vertical-align: middle;
			height: 40px;
		}
	}
}

// Drag/sort placeholder

.elementor-sortable-placeholder {
	background-color: $editor-info;
	animation-timing-function: ease-out;
	animation-duration: 500ms;
	opacity: .9;

	&.elementor-section-placeholder {
		height: $section-placeholder-size;
		animation-name: placeholder-section;
	}

	&.elementor-column-placeholder {
		width: $column-placeholder-size;
		animation-name: placeholder-column;
	}

	&.elementor-widget-placeholder {
		height: $widget-placeholder-size;
		animation-name: placeholder-widget;
	}
}

.elementor-draggable-over:not([data-dragged-element="section"]):not([data-dragged-is-inner="true"]) > .elementor-empty-view > .elementor-first-add,
.elementor-first-add.elementor-html5dnd-current-element {

	&:after {
		content: '';
		background-color: $editor-info;
		transition-timing-function: ease-out;
		opacity: .9;
		height: $widget-placeholder-size;
		animation: placeholder-widget 500ms;
		width: 100%;
	}

	.elementor-icon {
		display: none;
	}
}

.elementor-draggable-over[data-dragged-element="section"][data-dragged-is-inner="true"] {

	.elementor-inner-column {

		.elementor-sortable-placeholder {
			display: none;
		}
	}
}

// Add new Section
.elementor-add-section {
	background-color: rgba(255, 255, 255, .5);
	max-width: 1140px;
	position: relative;

	&:not(.elementor-dragging-on-child) {
		border: 2px dashed $editor-lightest;
	}

	&.elementor-dragging-on-child {
		border: 3px dashed $editor-info;
	}

	&[data-view="choose-action"] {

		.elementor-select-preset {
			display: none;
		}
	}

	&[data-view="select-preset"] {

		.elementor-add-new-section {
			display: none;
		}
	}

	@media (max-width: $screen-xs-max) {
		display: none;
	}
}

.elementor-add-section-inner {
	text-align: center;
	margin-top: 10px;
	padding: 40px 0;
}

.elementor-add-new-section {
	display: inline-block; // For smooth dragging above

	.elementor-button {
		color: #fff;
		background-image: none; // Reset for some themes
		font-size: 13px;
		font-family: Arial, Helvetica, sans-serif;
		font-weight: normal;
		font-style: normal;
		line-height: 1;
		text-transform: uppercase;
		height: 40px;
		width: 170px;
		padding: 0;
		border: none;
		border-radius: 3px;
		cursor: pointer;

		&:hover {
			opacity: 0.85;
			box-shadow: 0 0 2px rgba(0, 0, 0, .12), 0 2px 2px rgba(0, 0, 0, .2);
		}

		&:active {
			box-shadow: 0 10px 20px rgba(0, 0, 0, .19), 0 6px 6px rgba(0, 0, 0, .1);
		}
	}

	.elementor-add-section-button {
		background-color: $editor-accent;
	}

	.elementor-add-template-button {
		background-color: $editor-dark;
		@include margin-start(25px);
	}
}

.elementor-add-section-drag-title {
	font-family: Arial, Helvetica, sans-serif;
	font-size: 13px;
	font-weight: normal;
	font-style: italic;
	line-height: 1;
	color: $editor-darker;
	margin-top: 15px;
}

.elementor-add-section-close {
	position: absolute;
	right: 20px;
	top: 20px;
	font-size: 20px;
	cursor: pointer;
	line-height: 1;
	color: $editor-lightest;
}

.elementor-select-preset-title {
	font-family: Arial, Helvetica, sans-serif;
	font-size: 13px;
	font-weight: 500;
	font-style: normal;
	text-transform: uppercase;
	color: $editor-darker;
}

.elementor-select-preset-list {
	list-style: none;
	padding: 0 25px;
	margin: 20px auto 0;
	overflow: hidden;
	max-width: 700px;

	.elementor-preset {
		cursor: pointer;
		margin: 0;
		padding: 10px;
		float: $start;

		&:hover {

			path {
				fill: $editor-dark;
			}
		}

		&:not(:hover) {

			path {
				fill: $editor-lightest;
			}
		}

		svg {
			height: 50px;
		}
	}
}

#elementor-add-new-section {
	margin: 60px auto;

	&[data-view="choose-action"] {

		.elementor-add-section-close {
			display: none;
		}
	}
}

.elementor-add-section-inline {
	margin: 10px auto;
}

.elementor-column-percents-popup-widget {
	position: absolute;
	color: #fff;
	font-size: 11px;
	background-color: $editor-darkest;
	height: 17px;
	width: 40px;
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: 1;

	&:after {
		content: '';
		position: absolute;
		width:0;
		height:0;
		border: 8.5px solid transparent;
		top: 0;
	}

	&[data-side="left"] {
		border-radius: 3px 0 0 3px;

		&:after {
			left: 100%;
			border-left-color: $editor-darkest;
			border-right-width: 0;
		}
	}

	&[data-side="right"] {
		border-radius: 0 3px 3px 0;

		&:after {
			right: 100%;
			border-right-color: $editor-darkest;
			border-left-width: 0;
		}
	}
}

// Preview Mode
.elementor-editor-preview {

	.elementor-element-overlay,
	.elementor-empty,
	.elementor-add-section,
	.elementor-element-empty,
	.elementor-widget-empty {
		display: none;
	}
}